<div class="container-fluid p-3">
    <div class="card shadow-lg">
        <div class="card-body">
            <h2 class="card-title text-center fs-4">{{cardHeader}}</h2>

            <form #form="ngForm" (ngSubmit)="save(selectedPersonExtDto)">
                <!-- E-Posta -->
                <div class="mt-3 mb-3">
                    <label class="form-label" for="email">E-Posta</label>
                    <input
                        id="email"
                        type="text"
                        name="email"
                        [(ngModel)]="selectedPersonExtDto.email"
                        class="form-control"
                        [ngClass]="{ 'is-invalid': submitted && selectedPersonExtDtoErrors.email }"
                        [readOnly]="selectedPersonExtDto.personId != 0"
                        (change)="selectedPersonExtDtoErrors.email = ''"
                        tabindex="1"
                    />
                    <div class="invalid-feedback" *ngIf="submitted && selectedPersonExtDtoErrors.email">
                        <div>{{selectedPersonExtDtoErrors.email}}</div>
                    </div>
                </div>
                <!-- /E-Posta -->

                <!-- Telefon Numarası -->
                <div class="mt-3 mb-3">
                    <label class="form-label" for="phone">Telefon Numarası</label>
                    <input
                        id="phone"
                        type="text"
                        name="phone"
                        [(ngModel)]="selectedPersonExtDto.phone"
                        class="form-control"
                        [ngClass]="{ 'is-invalid': submitted && selectedPersonExtDtoErrors.phone }"
                        [readOnly]="selectedPersonExtDto.personId != 0"
                        (change)="selectedPersonExtDtoErrors.phone = ''"
                        tabindex="2"
                    />
                    <div class="invalid-feedback" *ngIf="submitted && selectedPersonExtDtoErrors.phone">
                        <div>{{selectedPersonExtDtoErrors.phone}}</div>
                    </div>
                </div>
                <!-- /Telefon Numarası -->
                
                <!-- Eski Şifre -->
                <div class="mt-3 mb-3" *ngIf="selectedPersonExtDto.personId != 0">
                    <div class="d-flex justify-content-between mb-2">
                        <label for="old-password">Eski Şifre</label>
                    </div>
                    <div class="input-group">
                        <input
                            id="old-password"
                            [type]="passwordTextType ? 'text' : 'password'"
                            name="old-password"
                            [(ngModel)]="selectedPersonExtDto.oldPassword"
                            class="form-control"
                            [ngClass]="{ 'is-invalid': submitted && selectedPersonExtDtoErrors.oldPassword }"
                            (change)="selectedPersonExtDtoErrors.oldPassword = ''"
                            placeholder="******"
                            tabindex="3"
                        />
                        <button class="btn btn-outline-success btn-success-custom" type="button" (click)="togglePasswordTextType()">
                            <i 
                                class="fas" 
                                [ngClass]="{
                                    'fa-eye-slash': passwordTextType,
                                    'fa-eye': !passwordTextType
                                }"
                            >
                            </i>
                        </button>
                        <!-- Alttaki div'in yerini değiştirme -->
                        <div class="invalid-feedback" *ngIf="submitted && selectedPersonExtDtoErrors.oldPassword">
                            <div>{{selectedPersonExtDtoErrors.oldPassword}}</div>
                        </div>
                    </div>

                </div>
                <!-- /Eski Şifre -->

                <!-- Şifre -->
                <div class="mt-3 mb-3">
                    <div class="d-flex justify-content-between mb-2">
                        <label for="password">Şifre</label>
                    </div>
                    <div class="input-group">
                        <input
                            id="password"
                            [type]="passwordTextType ? 'text' : 'password'"
                            name="password"
                            [(ngModel)]="selectedPersonExtDto.password"
                            class="form-control"
                            [ngClass]="{ 'is-invalid': submitted && selectedPersonExtDtoErrors.password }"
                            (change)="selectedPersonExtDtoErrors.password = ''"
                            placeholder="******"
                            tabindex="4"
                        />
                        <button class="btn btn-outline-success btn-success-custom" type="button" (click)="togglePasswordTextType()">
                            <i 
                                class="fas" 
                                [ngClass]="{
                                    'fa-eye-slash': passwordTextType,
                                    'fa-eye': !passwordTextType
                                }"
                            >
                            </i>
                        </button>
                        <!-- Alttaki div'in yerini değiştirme -->
                        <div class="invalid-feedback" *ngIf="submitted && selectedPersonExtDtoErrors.password">
                            <div>{{selectedPersonExtDtoErrors.password}}</div>
                        </div>
                    </div>

                </div>
                <!-- /Şifre -->
    
                <!-- Şifre (Tekrar) -->
                <div class="mt-3 mb-3">
                    <div class="d-flex justify-content-between mb-2">
                        <label for="password-again">Şifre (Tekrar)</label>
                    </div>
                    <div class="input-group">
                        <input
                            id="password-again"
                            [type]="passwordTextType ? 'text' : 'password'"
                            name="passwordAgain"
                            [(ngModel)]="selectedPersonExtDto.passwordAgain"
                            class="form-control"
                            [ngClass]="{ 'is-invalid': submitted && selectedPersonExtDtoErrors.passwordAgain }"
                            (change)="selectedPersonExtDtoErrors.passwordAgain = ''"
                            placeholder="******"
                            tabindex="5"
                        />
                        <button class="btn btn-outline-success btn-success-custom" type="button" (click)="togglePasswordTextType()">
                            <i 
                                class="fas" 
                                [ngClass]="{
                                    'fa-eye-slash': passwordTextType,
                                    'fa-eye': !passwordTextType
                                }"
                            >
                            </i>
                        </button>
                        <!-- Alttaki div'in yerini değiştirme -->
                        <div class="invalid-feedback" *ngIf="submitted && selectedPersonExtDtoErrors.passwordAgain">
                            <div>{{selectedPersonExtDtoErrors.passwordAgain}}</div>
                        </div>
                    </div>

                </div>
                <!-- /Şifre (Tekrar) -->

                <!-- Butonlar -->
                <div class="container-fluid m-0">
                    <div class="row">
                        <div class="col-6">
                            <button 
                                type="submit" 
                                class="btn btn-outline-success btn-success-custom w-100" 
                                [disabled]="loading"
                                tabindex="6"
                            >
                                <span *ngIf="loading" class="spinner-border spinner-border-sm me-1"></span>Kaydet
                            </button>
                        </div>
                        <div class="col-6">
                            <button 
                                type="button" 
                                class="btn btn-outline-secondary btn-cancel-custom w-100"
                                (click)="cancel()"
                            >İptal
                            </button>
                        </div>
                    </div>
                </div>
                <!-- /Butonlar -->
            </form>
        </div>
    </div>
</div>
    