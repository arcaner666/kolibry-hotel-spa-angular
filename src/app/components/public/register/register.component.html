<div class="container-fluid register-special d-flex flex-column justify-content-center" [ngClass]="{'p-2': breakpointService.isScreenXSmall() }">
    <div class="row justify-content-center align-items-center gx-0">
        <div class="col-sm-12 col-md-9 col-lg-7 col-xl-5 col-xxl-4">
            <div class="card shadow-lg" [ngClass]="{'mt-5 mb-5': breakpointService.screenSize.width >= 568 }">
                <div class="card-body mt-4">
                    <form>
                        <!-- Card Başlığı -->
                        <h2 class="card-title text-center fs-3">Hemen Kaydolun!</h2>
                        <!-- /Card Başlığı -->
            
                        <!-- Card Yazısı -->
                        <p class="card-text text-center">İşletmenizi kolayca yönetin.</p>
                        <!-- /Card Yazısı -->
            
                        <!-- Hata Bildirimi -->
                        <ngb-alert [type]="'danger'" [dismissible]="false" *ngIf="result.message">
                            <div class="alert-body">
                                <span>{{ result.message }}</span>
                            </div>
                        </ngb-alert>
                        <!-- /Hata Bildirimi -->
            
                        <!-- Kayıt Formu -->
                        <form #form="ngForm" (ngSubmit)="add()">
                            <!-- E-Posta -->
                            <div class="mt-3 mb-3">
                                <label class="form-label" for="email">E-Posta</label>
                                <input
                                    id="email"
                                    type="text"
                                    name="email"
                                    [(ngModel)]="personExtDto.email"
                                    class="form-control"
                                    [ngClass]="{ 'is-invalid': submitted && personExtDtoErrors.email }"
                                    (change)="personExtDtoErrors.email = ''"
                                    placeholder="abdce@mail.com"
                                    tabindex="1"
                                />
                                <div class="invalid-feedback" *ngIf="submitted && personExtDtoErrors.email">
                                    <div>{{personExtDtoErrors.email}}</div>
                                </div>
                            </div>
                            <!-- /E-Posta -->
                
                            <!-- Telefon Numarası -->
                            <div class="mt-3 mb-3">
                                <label class="form-label" for="phone">Telefon Numarası</label>
                                <input
                                    id="phone"
                                    type="text"
                                    name="phone"
                                    [(ngModel)]="personExtDto.phone"
                                    class="form-control"
                                    [ngClass]="{ 'is-invalid': submitted && personExtDtoErrors.phone }"
                                    (change)="personExtDtoErrors.phone = ''"
                                    placeholder="5554443322"
                                    tabindex="2"
                                />
                                <div class="invalid-feedback" *ngIf="submitted && personExtDtoErrors.phone">
                                    <div>{{personExtDtoErrors.phone}}</div>
                                </div>
                            </div>
                            <!-- /Telefon Numarası -->
                
                            <!-- Şifre -->
                            <div class="mt-3 mb-3">
                                <div class="d-flex justify-content-between mb-2">
                                    <label for="password">Şifre</label>

                                    <!-- Şifremi Unuttum Linki -->
                                    <a routerLink="/pages/authentication/forgot-password-v2"><small>Şifremi Unuttum</small></a>
                                    <!-- /Şifremi Unuttum Linki -->

                                </div>
                                <div class="input-group">
                                    <input
                                        id="password"
                                        [type]="passwordTextType ? 'text' : 'password'"
                                        name="password"
                                        [(ngModel)]="personExtDto.password"
                                        class="form-control"
                                        [ngClass]="{ 'is-invalid': submitted && personExtDtoErrors.password }"
                                        (change)="personExtDtoErrors.password = ''"
                                        placeholder="******"
                                        tabindex="3"
                                    />
                                    <button class="btn btn-outline-success btn-success-custom" type="button" (click)="togglePasswordTextType()">
                                        <i 
                                            class="fas" 
                                            [ngClass]="{
                                                'fa-eye-slash': passwordTextType,
                                                'fa-eye': !passwordTextType
                                            }"
                                        >
                                        </i>
                                    </button>
                                    <!-- Alttaki div'in yerini değiştirme -->
                                    <div class="invalid-feedback" *ngIf="submitted && personExtDtoErrors.password">
                                        <div>{{personExtDtoErrors.password}}</div>
                                    </div>
                                </div>

                            </div>
                            <!-- /Şifre -->
                
                            <!-- Şifre (Tekrar) -->
                            <div class="mt-3 mb-3">
                                <div class="d-flex justify-content-between mb-2">
                                    <label for="password-again">Şifre (Tekrar)</label>

                                    <!-- Şifremi Unuttum Linki -->
                                    <a routerLink="/pages/authentication/forgot-password-v2"><small>Şifremi Unuttum</small></a>
                                    <!-- /Şifremi Unuttum Linki -->

                                </div>
                                <div class="input-group">
                                    <input
                                        id="password-again"
                                        [type]="passwordTextType ? 'text' : 'password'"
                                        name="passwordAgain"
                                        [(ngModel)]="personExtDto.passwordAgain"
                                        class="form-control"
                                        [ngClass]="{ 'is-invalid': submitted && personExtDtoErrors.passwordAgain }"
                                        (change)="personExtDtoErrors.passwordAgain = ''"
                                        placeholder="******"
                                        tabindex="3"
                                    />
                                    <button class="btn btn-outline-success btn-success-custom" type="button" (click)="togglePasswordTextType()">
                                        <i 
                                            class="fas" 
                                            [ngClass]="{
                                                'fa-eye-slash': passwordTextType,
                                                'fa-eye': !passwordTextType
                                            }"
                                        >
                                        </i>
                                    </button>
                                    <!-- Alttaki div'in yerini değiştirme -->
                                    <div class="invalid-feedback" *ngIf="submitted && personExtDtoErrors.passwordAgain">
                                        <div>{{personExtDtoErrors.passwordAgain}}</div>
                                    </div>
                                </div>

                            </div>
                            <!-- /Şifre (Tekrar) -->

                            <!-- Kayıt Butonu -->
                            <div class="mt-4 d-grid col-12">
                                <button 
                                    class="btn btn-outline-success btn-success-custom"
                                    [disabled]="loading"
                                    tabindex="12"
                                >
                                    <span *ngIf="loading" class="spinner-border spinner-border-sm"></span> Kayıt Ol
                                </button>
                            </div>
                            <!-- /Kayıt Butonu -->
                        </form>
                        <!-- /Kayıt Formu -->
            
                        <!-- Giriş Sayfasına Geçiş -->
                        <p class="text-center mt-2">
                            <span>Zaten hesabınız var mı?</span>
                            <a class="ms-2" routerLink="/public/login">
                                <span>Oturum açın.</span>
                            </a>
                        </p>
                        <!-- /Giriş Sayfasına Geçiş -->
                    </form>
                </div>
            </div>            
        </div>
    </div>
</div>

<!-- Kayıt Başarılıysa Giriş Ekranına Yönlendirecek Modal -->
<ng-template #registrationModal let-modal>
    <div class="modal-header justify-content-between">
        <img class="opacity-0" src="#" width="24" height="24">
        <h4 class="modal-title" id="modal-basic-title">Kayıt Başarılı!</h4>
        <button type="button" class="btn-close m-0" aria-label="Close" (click)="modal.dismiss('cancel')"></button>
    </div>
    <div class="modal-body">
        <p class="text-center m-0">Artık hesabınıza giriş yapabilirsiniz!</p>
    </div>
    <div class="modal-footer w-100">
        <div class="container-fluid m-0">
            <div class="row">
                <div class="col-12">
                    <button class="btn btn-outline-success btn-success-custom w-100" ngbAutofocus (click)="modal.close('ok')" routerLink="/public/login">Giriş Yap</button>
                </div>
            </div>
        </div>
    </div>
</ng-template>
<!-- /Kayıt Başarılıysa Giriş Ekranına Yönlendirecek Modal -->
